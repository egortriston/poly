<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>СПбПУ - Вход в систему</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .auth-container {
            max-width: 500px;
            margin: 50px auto;
            padding: 40px;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .auth-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 30px;
            text-align: center;
            color: #2c3e50;
        }

        .auth-form .form-group {
            margin-bottom: 20px;
        }

        .auth-form label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #34495e;
        }

        .auth-form input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .auth-form input:focus {
            border-color: #3498db;
            outline: none;
        }

        .auth-form button {
            width: 100%;
            padding: 12px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .auth-form button:hover {
            background-color: #2980b9;
        }

        .auth-links {
            margin-top: 20px;
            text-align: center;
        }

        .auth-links a {
            color: #3498db;
            text-decoration: none;
            transition: color 0.3s;
        }

        .auth-links a:hover {
            color: #2980b9;
            text-decoration: underline;
        }

        .auth-divider {
            margin: 20px 0;
            text-align: center;
            position: relative;
            color: #95a5a6;
        }

        .auth-divider::before,
        .auth-divider::after {
            content: "";
            position: absolute;
            top: 50%;
            width: 45%;
            height: 1px;
            background-color: #ddd;
        }

        .auth-divider::before {
            left: 0;
        }

        .auth-divider::after {
            right: 0;
        }

        .auth-social {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .auth-social-btn {
            padding: 10px 20px;
            border: 1px solid #ddd;
            border-radius: 6px;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .auth-social-btn:hover {
            background-color: #f8f9fa;
        }

        .auth-social-icon {
            width: 20px;
            height: 20px;
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <img src="image/logo01.svg" alt="Логотип СПбПУ" class="logo">
                <img src="image/logo.svg" alt="Логотип СПбПУ" class="logo-ipmt">
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <div class="auth-container">
                <h1 class="auth-title">Вход в личный кабинет</h1>

                <form class="auth-form" id="loginForm">
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" required placeholder="Введите ваш email">
                    </div>

                    <div class="form-group">
                        <label for="password">Пароль</label>
                        <input type="password" id="password" name="password" required placeholder="Введите ваш пароль">
                    </div>

                    <div class="form-group">
                        <button type="submit">Войти</button>
                    </div>
                </form>

                <div class="auth-links">
                    <a href="forgot-password.html">Забыли пароль?</a>
                    <div class="auth-divider">или</div>
                    <p>Ещё нет аккаунта? <a href="reg.html">Зарегистрироваться</a></p>
                </div>

                <!-- <div class="auth-social">
                    <div class="auth-social-btn" onclick="loginWith('vk')">
                        <svg class="auth-social-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M15.07 2H8.93C3.33 2 2 3.33 2 8.93V15.07C2 20.67 3.33 22 8.93 22H15.07C20.67 22 22 20.67 22 15.07V8.93C22 3.33 20.67 2 15.07 2M18.15 16.27H16.69C16.14 16.27 15.97 15.82 15 14.83C14.12 14 13.74 13.88 13.53 13.88C13.24 13.88 13.15 13.96 13.15 14.38V15.69C13.15 16.04 13.04 16.26 12.11 16.26C10.57 16.26 8.86 15.32 7.66 13.59C5.85 11.05 5.36 9.13 5.36 8.75C5.36 8.54 5.43 8.34 5.85 8.34H7.32C7.69 8.34 7.83 8.5 7.97 8.9C8.69 11 9.89 12.8 10.38 12.8C10.57 12.8 10.65 12.71 10.65 12.25V10.1C10.6 9.21 10.07 9.12 10.07 8.75C10.07 8.54 10.24 8.34 10.55 8.34H12.82C13.13 8.34 13.28 8.5 13.28 8.88V11.77C13.28 12.08 13.39 12.19 13.68 12.19C13.9 12.19 14.18 12.08 14.45 11.83C15.45 10.83 16.16 8.93 16.16 8.93C16.28 8.63 16.41 8.53 16.73 8.53H18.15C18.46 8.53 18.58 8.71 18.5 9.03C18.18 10.16 16.75 12.65 16.75 12.65C16.57 12.95 16.47 13.13 16.75 13.5C16.95 13.76 17.45 14.25 17.65 14.45C18.05 14.87 18.53 15.27 18.66 15.45C18.8 15.63 18.76 15.77 18.66 15.97C18.56 16.17 18.38 16.27 18.15 16.27Z" />
                        </svg>
                        <span>ВКонтакте</span>
                    </div>

                    <div class="auth-social-btn" onclick="loginWith('google')">
                        <svg class="auth-social-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z" />
                        </svg>
                        <span>Google</span>
                    </div>
                </div> -->
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Контакты</h3>
                    <p>Санкт-Петербург, Политехническая ул., 29</p>
                    <p>+7 (812) 123-45-67</p>
                    <p>info@spbstu.ru</p>
                </div>

                <div class="footer-section">
                    <h3>Быстрые ссылки</h3>
                    <a href="index.html">Главная</a>
                    <a href="#">Преподаватели</a>
                    <a href="#">Библиотека</a>
                    <a href="#">Для абитуриентов</a>
                </div>

                <div class="footer-section">
                    <h3>Социальные сети</h3>
                    <a href="#">ВКонтакте</a>
                    <a href="#">Telegram</a>
                    <a href="#">YouTube</a>
                    <a href="#">Twitter</a>
                </div>
            </div>

            <div class="copyright">
                <p>© 2023 Санкт-Петербургский политехнический университет Петра Великого. Все права защищены.</p>
            </div>
        </div>
    </footer>

    <script>
        document.getElementById('loginForm').addEventListener('submit', async function (e) {
            e.preventDefault();

            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            try {
                const response = await fetch('/api/users/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ user_mail: email, password })
                });
                const data = await response.json();
                if (!response.ok) {
                    alert(data.error || 'Ошибка входа');
                    return;
                }
                localStorage.setItem('isAuth', 'true');
                localStorage.setItem('user', JSON.stringify(data.user)); // сохраняем пользователя
                window.location.href = 'home.html';
            } catch (err) {
                alert('Ошибка сети: ' + err.message);
            }
        });

        function loginWith(provider) {
            console.log('Вход через:', provider);
            // Здесь должна быть логика входа через соцсети
        }
    </script>
</body>

</html>